{
  "_comment": "This file is generated. Please edit .homeycompose/app.json instead.",
  "id": "com.wifipool",
  "name": {
    "en": "WiFi Pool"
  },
  "description": {
    "en": "WiFiPool integration with auto discovery of domain, sensors and switches."
  },
  "category": [
    "tools"
  ],
  "compatibility": ">=12.0.1",
  "sdk": 3,
  "brandColor": "#0b5ea8",
  "version": "1.2.0",
  "author": {
    "name": "Marco Ruiter"
  },
  "images": {
    "xlarge": "/assets/images/xlarge.png",
    "large": "/assets/images/large.png",
    "small": "/assets/images/small.png"
  },
  "permissions": [],
  "api": {
    "autoSetup": {
      "method": "POST",
      "path": "/autosetup"
    },
    "discoverIos": {
      "method": "POST",
      "path": "/discover"
    },
    "testApi": {
      "method": "POST",
      "path": "/test"
    }
  },
  "esm": true,
  "flow": {
    "actions": [
      {
        "id": "set_poll_interval",
        "title": {
          "en": "Set polling interval (seconds)"
        },
        "args": [
          {
            "name": "seconds",
            "type": "number"
          }
        ]
      },
      {
        "id": "refresh_now",
        "title": {
          "en": "Refresh WiFi Pool now"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=wifipool"
          }
        ]
      }
    ],
    "triggers": [
      {
        "id": "flow_updated",
        "title": {
          "en": "Flow updated"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=wifipool"
          }
        ],
        "tokens": [
          {
            "name": "flow",
            "type": "number",
            "title": {
              "en": "Flow (L/min)"
            }
          }
        ]
      },
      {
        "id": "health_changed",
        "title": {
          "en": "Health changed"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=wifipool"
          }
        ],
        "tokens": [
          {
            "name": "alarm",
            "type": "boolean",
            "title": {
              "en": "Health alarm"
            }
          }
        ]
      },
      {
        "id": "ph_updated",
        "title": {
          "en": "pH updated"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=wifipool"
          }
        ],
        "tokens": [
          {
            "name": "ph",
            "type": "number",
            "title": {
              "en": "pH"
            }
          }
        ]
      },
      {
        "id": "redox_updated",
        "title": {
          "en": "Redox updated"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=wifipool"
          }
        ],
        "tokens": [
          {
            "name": "redox",
            "type": "number",
            "title": {
              "en": "Redox (mV)"
            }
          }
        ]
      }
    ],
    "conditions": [
      {
        "id": "flow_above",
        "title": {
          "en": "Flow above ..."
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=wifipool"
          },
          {
            "name": "threshold",
            "type": "number"
          }
        ]
      },
      {
        "id": "flow_below",
        "title": {
          "en": "Flow below ..."
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=wifipool"
          },
          {
            "name": "threshold",
            "type": "number"
          }
        ]
      },
      {
        "id": "health_ok",
        "title": {
          "en": "Health OK"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=wifipool"
          }
        ]
      },
      {
        "id": "ph_above",
        "title": {
          "en": "pH above ..."
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=wifipool"
          },
          {
            "name": "threshold",
            "type": "number"
          }
        ]
      },
      {
        "id": "ph_below",
        "title": {
          "en": "pH below ..."
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=wifipool"
          },
          {
            "name": "threshold",
            "type": "number"
          }
        ]
      },
      {
        "id": "redox_above",
        "title": {
          "en": "Redox above ..."
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=wifipool"
          },
          {
            "name": "threshold",
            "type": "number"
          }
        ]
      },
      {
        "id": "redox_below",
        "title": {
          "en": "Redox below ..."
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=wifipool"
          },
          {
            "name": "threshold",
            "type": "number"
          }
        ]
      }
    ]
  },
  "drivers": [
    {
      "id": "wifipool",
      "name": {
        "en": "WiFi Pool Sensor"
      },
      "class": "sensor",
      "capabilities": [
        "measure_temperature",
        "measure_redox",
        "measure_ph",
        "alarm_flow",
        "alarm_health"
      ],
      "connectivity": [
        "cloud"
      ],
      "pair": [
        {
          "id": "start"
        }
      ],
      "images": {
        "small": "/drivers/wifipool/assets/images/small.jpg",
        "large": "/drivers/wifipool/assets/images/large.jpg",
        "xlarge": "/drivers/wifipool/assets/images/xlarge.jpg"
      },
      "platforms": [
        "local",
        "cloud"
      ],
      "settings": [
        {
          "id": "poll_interval",
          "type": "number",
          "label": {
            "en": "Polling interval (seconds)"
          },
          "hint": {
            "en": "How often to poll WiFiPool for new sensor values. Default: 60 seconds."
          },
          "min": 15,
          "max": 600,
          "step": 5,
          "value": 60
        }
      ]
    }
  ],
  "capabilities": {
    "alarm_flow": {
      "title": {
        "en": "Flow"
      },
      "type": "boolean",
      "getable": true,
      "setable": false,
      "uiComponent": "sensor",
      "insights": true,
      "icon": "/assets/wifipool/icons/flow.svg"
    },
    "alarm_health": {
      "type": "boolean",
      "title": {
        "en": "Health issue"
      },
      "uiComponent": "sensor",
      "getable": true,
      "setable": false,
      "insights": true,
      "icon": "/assets/wifipool/icons/health.svg"
    },
    "measure_ph": {
      "type": "number",
      "title": {
        "en": "pH"
      },
      "uiComponent": "sensor",
      "decimals": 2,
      "min": 0,
      "max": 14,
      "units": {
        "en": "pH"
      },
      "chartType": "spline",
      "getable": true,
      "setable": false,
      "insights": true
    },
    "measure_redox": {
      "type": "number",
      "title": {
        "en": "Redox"
      },
      "uiComponent": "sensor",
      "decimals": 0,
      "min": -2000,
      "max": 2000,
      "units": {
        "en": "mV"
      },
      "chartType": "spline",
      "getable": true,
      "setable": false,
      "insights": true,
      "icon": "/assets/wifipool/icons/redox.svg"
    },
    "onoff_i0": {
      "type": "boolean",
      "title": {
        "en": "Switch i0"
      },
      "getable": true,
      "setable": true,
      "uiComponent": "toggle"
    },
    "onoff_i1": {
      "type": "boolean",
      "title": {
        "en": "Switch i1"
      },
      "getable": true,
      "setable": true,
      "uiComponent": "toggle"
    },
    "onoff_i2": {
      "type": "boolean",
      "title": {
        "en": "Switch i2"
      },
      "getable": true,
      "setable": true,
      "uiComponent": "toggle"
    },
    "onoff_i3": {
      "type": "boolean",
      "title": {
        "en": "Switch i3"
      },
      "getable": true,
      "setable": true,
      "uiComponent": "toggle"
    },
    "onoff_o0": {
      "type": "boolean",
      "title": {
        "en": "Relay o0"
      },
      "getable": true,
      "setable": true,
      "uiComponent": "toggle"
    },
    "onoff_o1": {
      "type": "boolean",
      "title": {
        "en": "Relay o1"
      },
      "getable": true,
      "setable": true,
      "uiComponent": "toggle"
    },
    "onoff_o2": {
      "type": "boolean",
      "title": {
        "en": "Relay o2"
      },
      "getable": true,
      "setable": true,
      "uiComponent": "toggle"
    },
    "onoff_o3": {
      "type": "boolean",
      "title": {
        "en": "Relay o3"
      },
      "getable": true,
      "setable": true,
      "uiComponent": "toggle"
    }
  }
}