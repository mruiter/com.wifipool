{
  "_comment": "This file is generated. Please edit .homeycompose/app.json instead.",
  "id": "com.wifipool",
  "name": {
    "en": "WiFi Pool"
  },
  "description": {
    "en": "WiFiPool integration with auto discovery of domain, sensors and switches."
  },
  "category": [
    "tools"
  ],
  "compatibility": ">=12.0.1",
  "sdk": 3,
  "brandColor": "#0b5ea8",
  "version": "1.2.0",
  "author": {
    "name": "Marco Ruiter"
  },
  "images": {
    "xlarge": "/assets/images/xlarge.png",
    "large": "/assets/images/large.png",
    "small": "/assets/images/small.png"
  },
  "permissions": [  ],
  "api": {
    "autoSetup": {
      "method": "POST",
      "path": "/autosetup"
    },
    "discoverIos": {
      "method": "POST",
      "path": "/discover"
    },
    "testApi": {
      "method": "POST",
      "path": "/test"
    }
  },
  "esm": true,
  "flow": {
    "triggers": [
      {
        "id": "flow_updated",
        "title": {
          "en": "Flow updated"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=wifipool"
          }
        ],
        "tokens": [
          {
            "name": "flow",
            "type": "number",
            "title": {
              "en": "Flow (L/min)"
            }
          }
        ]
      },
      {
        "id": "health_changed",
        "title": {
          "en": "Health changed"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=wifipool"
          }
        ],
        "tokens": [
          {
            "name": "alarm",
            "type": "boolean",
            "title": {
              "en": "Health alarm"
            }
          }
        ]
      },
      {
        "id": "ph_updated",
        "title": {
          "en": "pH updated"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=wifipool"
          }
        ],
        "tokens": [
          {
            "name": "ph",
            "type": "number",
            "title": {
              "en": "pH"
            }
          }
        ]
      },
      {
        "id": "redox_updated",
        "title": {
          "en": "Redox updated"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=wifipool"
          }
        ],
        "tokens": [
          {
            "name": "redox",
            "type": "number",
            "title": {
              "en": "Redox (mV)"
            }
          }
        ]
      }
    ],
    "conditions": [
      {
        "id": "flow_above",
        "title": {
          "en": "Flow above ..."
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=wifipool"
          },
          {
            "name": "threshold",
            "type": "number"
          }
        ]
      },
      {
        "id": "flow_below",
        "title": {
          "en": "Flow below ..."
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=wifipool"
          },
          {
            "name": "threshold",
            "type": "number"
          }
        ]
      },
      {
        "id": "health_ok",
        "title": {
          "en": "Health OK"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=wifipool"
          }
        ]
      },
      {
        "id": "ph_above",
        "title": {
          "en": "pH above ..."
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=wifipool"
          },
          {
            "name": "threshold",
            "type": "number"
          }
        ]
      },
      {
        "id": "ph_below",
        "title": {
          "en": "pH below ..."
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=wifipool"
          },
          {
            "name": "threshold",
            "type": "number"
          }
        ]
      },
      {
        "id": "redox_above",
        "title": {
          "en": "Redox above ..."
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=wifipool"
          },
          {
            "name": "threshold",
            "type": "number"
          }
        ]
      },
      {
        "id": "redox_below",
        "title": {
          "en": "Redox below ..."
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=wifipool"
          },
          {
            "name": "threshold",
            "type": "number"
          }
        ]
      }
    ],
    "actions": [
      {
        "id": "refresh_now",
        "title": {
          "en": "Refresh WiFi Pool now"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=wifipool"
          }
        ]
      },
      {
        "id": "set_poll_interval",
        "title": {
          "en": "Set polling interval (seconds)"
        },
        "args": [
          {
            "name": "seconds",
            "type": "number"
          }
        ]
      }
    ]
  },
  "drivers": [
    {
      "id": "wifipool",
      "name": {
        "en": "WiFi Pool Sensor"
      },
      "class": "sensor",
      "capabilities": [
        "measure_redox",
        "measure_ph",
        "measure_flow",
        "alarm_health"
      ],
      "connectivity": [
        "cloud"
      ],
      "pair": [
        {
          "id": "start"
        }
      ],
      "images": {
        "small": "/drivers/wifipool/assets/images/small.jpg",
        "large": "/drivers/wifipool/assets/images/large.jpg",
        "xlarge": "/drivers/wifipool/assets/images/xlarge.jpg"
      },
      "platforms": [
        "local",
        "cloud"
      ]
    }
  ],
  "capabilities": {
    "alarm_health": {
      "type": "boolean",
      "title": {
        "en": "Health issue"
      },
      "getable": true,
      "setable": false,
      "uiComponent": "sensor",
      "icon": "/assets/capabilities/alarm.svg"
    },
    "measure_flow": {
      "type": "number",
      "units": {
        "en": "L/min"
      },
      "title": {
        "en": "Flow"
      },
      "getable": true,
      "setable": false,
      "uiComponent": "sensor",
      "decimals": 1
    },
    "measure_ph": {
      "type": "number",
      "title": {
        "en": "pH"
      },
      "getable": true,
      "setable": false,
      "uiComponent": "sensor",
      "decimals": 2
    },
    "measure_redox": {
      "type": "number",
      "units": {
        "en": "mV"
      },
      "title": {
        "en": "Redox"
      },
      "getable": true,
      "setable": false,
      "uiComponent": "sensor",
      "decimals": 0
    },
    "onoff_i0": {
      "type": "boolean",
      "title": {
        "en": "Switch i0"
      },
      "getable": true,
      "setable": true,
      "uiComponent": "toggle"
    },
    "onoff_i1": {
      "type": "boolean",
      "title": {
        "en": "Switch i1"
      },
      "getable": true,
      "setable": true,
      "uiComponent": "toggle"
    },
    "onoff_i2": {
      "type": "boolean",
      "title": {
        "en": "Switch i2"
      },
      "getable": true,
      "setable": true,
      "uiComponent": "toggle"
    },
    "onoff_i3": {
      "type": "boolean",
      "title": {
        "en": "Switch i3"
      },
      "getable": true,
      "setable": true,
      "uiComponent": "toggle"
    },
    "onoff_o0": {
      "type": "boolean",
      "title": {
        "en": "Relay o0"
      },
      "getable": true,
      "setable": true,
      "uiComponent": "toggle"
    },
    "onoff_o1": {
      "type": "boolean",
      "title": {
        "en": "Relay o1"
      },
      "getable": true,
      "setable": true,
      "uiComponent": "toggle"
    },
    "onoff_o2": {
      "type": "boolean",
      "title": {
        "en": "Relay o2"
      },
      "getable": true,
      "setable": true,
      "uiComponent": "toggle"
    },
    "onoff_o3": {
      "type": "boolean",
      "title": {
        "en": "Relay o3"
      },
      "getable": true,
      "setable": true,
      "uiComponent": "toggle"
    }
  }
}